<div class="logo-builder-container">
  <div class="hero-section">
    <div class="hero-content">
      <h1>Create Stunning Logos</h1>
      <p>Design professional logos in minutes with our intuitive logo builder</p>
      <div class="hero-actions">
        <button class="create-btn primary" (click)="onCreateNewLogo()">
          Create Your Logo
        </button>
        <button class="create-btn secondary" (click)="onOpenTestPage()">
          Test Advanced Features
        </button>
        <button class="create-btn secondary" (click)="onTestAdvancedFeatures()">
          Demo All Features
        </button>
      </div>
    </div>
  </div>

  <!-- Advanced Controls Bar -->
  <div class="advanced-controls" *ngIf="isAdvancedFeaturesLoaded">
    <div class="controls-section">
      <div class="undo-redo-controls">
        <button 
          class="control-btn" 
          [disabled]="!canUndo" 
          (click)="onUndo()"
          title="Undo last action"
        >
          ↶ Undo
        </button>
        <button 
          class="control-btn" 
          [disabled]="!canRedo" 
          (click)="onRedo()"
          title="Redo last action"
        >
          ↷ Redo
        </button>
      </div>
      
      <div class="export-controls">
        <span class="control-label">Quick Export:</span>
        <button 
          *ngFor="let format of exportFormats" 
          class="export-btn"
          [disabled]="true"
          title="Export as {{format}}"
        >
          {{format}}
        </button>
      </div>
    </div>
  </div>

  <!-- Advanced Features Section -->
  <div class="features-section" *ngIf="isAdvancedFeaturesLoaded">
    <div class="section-header">
      <h2>Quick Start with Fonts & Symbols</h2>
      <p>Choose a font or symbol to start your logo design</p>
    </div>

    <!-- Fonts Section -->
    <div class="fonts-section">
      <h3>Popular Fonts</h3>
      <div class="fonts-grid">
        <div 
          *ngFor="let font of availableFonts.slice(0, 6)" 
          class="font-card"
          (click)="onCreateLogoWithFont(font)"
        >
          <div class="font-preview" [style.font-family]="font.name">
            {{ font.name }}
          </div>
          <div class="font-info">
            <span class="font-name">{{ font.name }}</span>
            <span class="font-category">{{ font.category }}</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Symbols Section -->
    <div class="symbols-section">
      <h3>Popular Symbols</h3>
      <div class="symbols-grid">
        <div 
          *ngFor="let symbol of availableSymbols.slice(0, 6)" 
          class="symbol-card"
          (click)="onCreateLogoWithSymbol(symbol)"
        >
          <div class="symbol-preview">
            <div class="symbol-icon">
              {{ symbol.name?.charAt(0) || '?' }}
            </div>
          </div>
          <div class="symbol-info">
            <span class="symbol-name">{{ symbol.name }}</span>
            <span class="symbol-type">{{ symbol.type }}</span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="content-section">
    <div class="section-header">
      <h2>Your Logos</h2>
      <div class="search-bar">
        <input 
          type="text" 
          placeholder="Search logos..." 
          [(ngModel)]="searchQuery"
          (input)="onSearch()"
        >
      </div>
    </div>

    <div class="logos-grid">
      <app-logo-grid 
        [logos]="logos$ | async"
        (editLogo)="onEditLogo($event)"
        (previewLogo)="onPreviewLogo($event)"
        (cloneLogo)="onCloneLogo($event)"
        (deleteLogo)="onDeleteLogo($event)">
      </app-logo-grid>
    </div>

    <div class="empty-state" *ngIf="(logos$ | async)?.length === 0">
      <h3>No logos found</h3>
      <p>Start creating your first logo!</p>
      <button class="create-btn" (click)="onCreateNewLogo()">
        Create Your First Logo
      </button>
    </div>
  </div>

  <div class="template-gallery-section">
    <h2>Template Gallery</h2>
    <app-logo-template-gallery></app-logo-template-gallery>
  </div>

  <!-- Features Status -->
  <div class="status-section" *ngIf="isAdvancedFeaturesLoaded">
    <div class="status-info">
      <span>✅ {{ availableFonts.length }} fonts loaded</span>
      <span>✅ {{ availableSymbols.length }} symbols loaded</span>
      <span>✅ {{ fontCategories.length }} font categories</span>
      <span>✅ {{ exportFormats.length }} export formats</span>
      <span>✅ Undo/Redo system active</span>
    </div>
  </div>
</div>

<!-- Logo Creation Entry Screen -->
<div class="logo-creation-container">
  
  <!-- Left Side - Brand Input -->
  <div class="brand-input-section">
    <div class="brand-header">
      <img src="assets/icons/logo-placeholder.svg" alt="Network Solutions" class="logo" />
      <h1>Your logo journey starts here. Pick a design to customize.</h1>
      <p>Choose a logo you like — you can tweak every detail in the next steps to make it all yours.</p>
    </div>

    <div class="brand-form">
      <div class="form-group">
        <label for="brandName">Brand Name</label>
        <input 
          type="text" 
          id="brandName"
          class="brand-input"
          [(ngModel)]="brandName"
          (input)="onBrandNameChange()"
          (focus)="onBrandNameFocus()"
          (blur)="onBrandNameBlur()"
          (dblclick)="onBrandNameDoubleClick($event)"
          placeholder="Enter your brand name"
          #brandNameInput
        />
      </div>

      <div class="form-group">
        <label for="slogan">Slogan <span class="optional">(optional)</span></label>
        <input 
          type="text" 
          id="slogan"
          class="slogan-input"
          [(ngModel)]="slogan"
          (input)="onSloganChange()"
          placeholder="Enter your slogan"
        />
      </div>
    </div>

    <div class="cta-section">
      <button 
        class="cta-button"
        [class.enabled]="selectedLogoId !== null"
        [disabled]="selectedLogoId === null"
        (click)="onStartCustomizing()"
      >
        {{ selectedLogoId !== null ? 'Start Customizing' : 'Pick a logo to start' }}
      </button>
    </div>
  </div>

  <!-- Right Side - Logo Gallery -->
  <div class="logo-gallery-section">
    <div class="gallery-header">
      <h2>SELECT A STARTING POINT</h2>
    </div>

    <div class="logo-gallery" [class.scrollable]="showScrollbar" (scroll)="onScroll($event)">
      <div class="logo-grid">
        <div 
          *ngFor="let logo of displayedLogos; let i = index; trackBy: trackByLogoId"
          class="logo-thumbnail"
          [class.selected]="selectedLogoId === logo.id"
          [class.hovered]="hoveredLogoId === logo.id"
          (click)="selectLogo(logo, i)"
          (mouseenter)="onLogoHover(logo.id)"
          (mouseleave)="onLogoLeave()"
        >
          <!-- Logo Preview Container -->
          <div class="logo-preview" #logoPreview></div>
          
          <!-- Selection Check Icon -->
          <div class="selection-check" *ngIf="selectedLogoId === logo.id">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <circle cx="12" cy="12" r="12" fill="#0066CC"/>
              <path d="M9 12L11 14L15 10" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </div>

          <!-- Selection Overlay -->
          <div class="selection-overlay" *ngIf="selectedLogoId === logo.id"></div>
        </div>
      </div>

      <!-- Load More Section -->
      <div class="load-more-section" *ngIf="hasMoreLogos">
        <button 
          class="load-more-button"
          [class.loading]="isLoadingMore"
          (click)="loadMoreLogos()"
        >
          {{ isLoadingMore ? 'Loading...' : 'Load More' }}
        </button>
      </div>
    </div>
  </div>
</div> 