<div class="cloud-save-status" [class]="'status-' + autosaveState.status" *ngIf="shouldShowStatus"
    [title]="getTooltipText()">
    <div class="cloud-icon-wrapper" [class.spinning]="autosaveState.status === 'saving'">
        <!-- Simple cloud icon with checkmark for saved state -->
        <!-- <svg *ngIf="autosaveState.status === 'saved'" class="cloud-icon saved" width="16" height="16"
            viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
            <path
                d="M4.406 3.342A5.53 5.53 0 0 1 8 2c2.69 0 4.923 2 5.166 4.579C14.758 6.804 16 8.137 16 9.773 16 11.569 14.502 13 12.687 13H3.781C1.708 13 0 11.366 0 9.318c0-1.763 1.266-3.223 2.942-3.593.143-.863.698-1.723 1.464-2.383zm.653.757c-.757.653-1.153 1.44-1.153 2.056v.448l-.445.049C2.064 6.805 1 7.952 1 9.318 1 10.785 2.23 12 3.781 12h8.906C13.98 12 15 10.988 15 9.773c0-1.216-1.02-2.228-2.313-2.228h-.5v-.5C12.188 4.825 10.328 3 8 3a4.53 4.53 0 0 0-2.941 1.1z" />
            <path
                d="M10.854 6.146a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 1 1 .708-.708L7.5 8.793l2.646-2.647a.5.5 0 0 1 .708 0z" />
        </svg> -->

<!--         
<svg *ngIf="autosaveState.status === 'saved'" class="cloud-icon saved" width="22" height="16" viewBox="0 0 22 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M11 0.900024C14.0605 0.900024 16.6068 3.16775 17.209 6.19202C19.3943 6.39148 21.1004 8.29267 21.1006 10.6246C21.1006 13.0901 19.1936 15.1001 16.834 15.1002H6C3.18208 15.1 0.900391 12.6963 0.900391 9.74963C0.900577 7.018 2.85758 4.75383 5.39355 4.44202C6.45854 2.33768 8.56912 0.900179 11 0.900024ZM11 2.85022C8.94977 2.8504 7.22787 4.29414 6.68848 6.276L6.66895 6.35022H6C4.21841 6.35044 2.7668 7.86678 2.7666 9.74963C2.7666 11.6327 4.21828 13.1498 6 13.15H16.834C18.1574 13.1499 19.2334 12.0265 19.2334 10.6246C19.2332 9.22298 18.1573 8.10037 16.834 8.10022H15.4834V7.56213C15.4832 4.95289 13.4734 2.85022 11 2.85022Z" fill="#A3A3A3"/>
</svg> -->



<svg *ngIf="autosaveState.status === 'saved'" class="cloud-icon saved" width="22" height="16" viewBox="0 0 22 16" fill="#2F964B" xmlns="http://www.w3.org/2000/svg">
  <!-- Cloud shape -->
  <path d="M11 0.900024C14.0605 0.900024 16.6068 3.16775 17.209 6.19202C19.3943 6.39148 21.1004 8.29267 21.1006 10.6246C21.1006 13.0901 19.1936 15.1001 16.834 15.1002H6C3.18208 15.1 0.900391 12.6963 0.900391 9.74963C0.900577 7.018 2.85758 4.75383 5.39355 4.44202C6.45854 2.33768 8.56912 0.900179 11 0.900024ZM11 2.85022C8.94977 2.8504 7.22787 4.29414 6.68848 6.276L6.66895 6.35022H6C4.21841 6.35044 2.7668 7.86678 2.7666 9.74963C2.7666 11.6327 4.21828 13.1498 6 13.15H16.834C18.1574 13.1499 19.2334 12.0265 19.2334 10.6246C19.2332 9.22298 18.1573 8.10037 16.834 8.10022H15.4834V7.56213C15.4832 4.95289 13.4734 2.85022 11 2.85022Z" fill="#A3A3A3"/>
  
  <!-- Checkmark icon inside the cloud -->
  <g transform="translate(7, 5) scale(0.8)">
    <path fill-rule="evenodd" clip-rule="evenodd" d="M8 0.947369L3 6L0 3.2887L0.942809 2.39551L3 4.10526L7 0L8 0.947369Z" fill="#2F964B"/>
  </g>
</svg>


        <!-- Simple cloud icon with spinner for saving state -->
        <svg *ngIf="autosaveState.status === 'saving'" class="cloud-icon saving" width="16" height="16"
            viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
            <path
                d="M4.406 3.342A5.53 5.53 0 0 1 8 2c2.69 0 4.923 2 5.166 4.579C14.758 6.804 16 8.137 16 9.773 16 11.569 14.502 13 12.687 13H3.781C1.708 13 0 11.366 0 9.318c0-1.763 1.266-3.223 2.942-3.593.143-.863.698-1.723 1.464-2.383zm.653.757c-.757.653-1.153 1.44-1.153 2.056v.448l-.445.049C2.064 6.805 1 7.952 1 9.318 1 10.785 2.23 12 3.781 12h8.906C13.98 12 15 10.988 15 9.773c0-1.216-1.02-2.228-2.313-2.228h-.5v-.5C12.188 4.825 10.328 3 8 3a4.53 4.53 0 0 0-2.941 1.1z" />
            <circle cx="8" cy="8" r="2" stroke="white" stroke-width="1" fill="none" opacity="0.8">
                <animate attributeName="r" values="1;2;1" dur="1s" repeatCount="indefinite" />
            </circle>
        </svg>

        <!-- Simple cloud icon with X for error state -->
        <svg *ngIf="autosaveState.status === 'error'" class="cloud-icon error" width="16" height="16"
            viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
            <path
                d="M4.406 3.342A5.53 5.53 0 0 1 8 2c2.69 0 4.923 2 5.166 4.579C14.758 6.804 16 8.137 16 9.773 16 11.569 14.502 13 12.687 13H3.781C1.708 13 0 11.366 0 9.318c0-1.763 1.266-3.223 2.942-3.593.143-.863.698-1.723 1.464-2.383zm.653.757c-.757.653-1.153 1.44-1.153 2.056v.448l-.445.049C2.064 6.805 1 7.952 1 9.318 1 10.785 2.23 12 3.781 12h8.906C13.98 12 15 10.988 15 9.773c0-1.216-1.02-2.228-2.313-2.228h-.5v-.5C12.188 4.825 10.328 3 8 3a4.53 4.53 0 0 0-2.941 1.1z" />
            <path d="M11.854 4.146a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708-.708l7-7a.5.5 0 0 1 .708 0z" />
            <path d="M4.146 4.146a.5.5 0 0 0 0 .708l7 7a.5.5 0 0 0 .708-.708l-7-7a.5.5 0 0 0-.708 0z" />
        </svg>

        <!-- Simple cloud icon for idle/unsaved state -->
        <!-- <svg *ngIf="autosaveState.status === 'idle'" class="cloud-icon unsaved" width="16" height="16"
            viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
            <path
                d="M4.406 3.342A5.53 5.53 0 0 1 8 2c2.69 0 4.923 2 5.166 4.579C14.758 6.804 16 8.137 16 9.773 16 11.569 14.502 13 12.687 13H3.781C1.708 13 0 11.366 0 9.318c0-1.763 1.266-3.223 2.942-3.593.143-.863.698-1.723 1.464-2.383zm.653.757c-.757.653-1.153 1.44-1.153 2.056v.448l-.445.049C2.064 6.805 1 7.952 1 9.318 1 10.785 2.23 12 3.781 12h8.906C13.98 12 15 10.988 15 9.773c0-1.216-1.02-2.228-2.313-2.228h-.5v-.5C12.188 4.825 10.328 3 8 3a4.53 4.53 0 0 0-2.941 1.1z" />
            <circle cx="8" cy="8" r="1" fill="white" opacity="0.7" />
        </svg> -->
        <svg *ngIf="autosaveState.status === 'idle'" class="cloud-icon unsaved" width="22" height="16" viewBox="0 0 22 16" fill="none" xmlns="http://www.w3.org/2000/svg">
  <!-- Cloud shape -->
  <path d="M11 0.900024C14.0605 0.900024 16.6068 3.16775 17.209 6.19202C19.3943 6.39148 21.1004 8.29267 21.1006 10.6246C21.1006 13.0901 19.1936 15.1001 16.834 15.1002H6C3.18208 15.1 0.900391 12.6963 0.900391 9.74963C0.900577 7.018 2.85758 4.75383 5.39355 4.44202C6.45854 2.33768 8.56912 0.900179 11 0.900024ZM11 2.85022C8.94977 2.8504 7.22787 4.29414 6.68848 6.276L6.66895 6.35022H6C4.21841 6.35044 2.7668 7.86678 2.7666 9.74963C2.7666 11.6327 4.21828 13.1498 6 13.15H16.834C18.1574 13.1499 19.2334 12.0265 19.2334 10.6246C19.2332 9.22298 18.1573 8.10037 16.834 8.10022H15.4834V7.56213C15.4832 4.95289 13.4734 2.85022 11 2.85022Z" fill="#A3A3A3"/>
  
  <!-- Checkmark icon inside the cloud -->
  <g transform="translate(7, 5) scale(0.8)">
    <path fill-rule="evenodd" clip-rule="evenodd" d="M8 0.947369L3 6L0 3.2887L0.942809 2.39551L3 4.10526L7 0L8 0.947369Z" fill="#A3A3A3"/>
  </g>
</svg>
    </div>

    <div class="status-text" *ngIf="showStatusText">
        <span *ngIf="autosaveState.status === 'saving'">Saving...</span>
        <span *ngIf="autosaveState.status === 'saved'">Saved</span>
        <span *ngIf="autosaveState.status === 'error'">Save failed</span>
        <span *ngIf="autosaveState.status === 'idle'">{{autosaveState.hasUnsavedChanges ? 'Unsaved changes' : 'All
            saved'}}</span>
    </div>
</div>